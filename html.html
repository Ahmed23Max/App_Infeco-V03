{% extends "layout.html" %}
{% block content %}
<html>
<head>
    <meta charset="utf-8">
    <title>{% block title %}{% endblock %}</title>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet"
        id="bootstrap-css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" type="text/css" href="static/style.css">

</head>

<body>
    

<nav class="navbar navbar-expand-sm sticky-top ">
    <div class="container-fluid">
        <a href="{{ url_for('home') }}" id="logo" class="navbar-brand">Infeco</a>
        <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div id="navbarCollapse" class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li class="nav-item">
                    <a href="{{ url_for('home') }}" class="nav-link"><i class="fas fa-home pr-1"></i>Acceuil</a>
                </li>
                <li class="nav-item">
                    <a href="{{ url_for('Admin') }}" class="nav-link"></i>Admin</a>
                </li>
                <li class="nav-item dropdown">
                    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">Services</a>
                    <div class="dropdown-menu">
                        <a href="{{ url_for('Locataire') }}" class="dropdown-item">Locataire</a>
                        <a href="{{ url_for('Appartement') }}" class="dropdown-item">Appartement</a>
                        <a href="{{ url_for('Agence') }}" class="dropdown-item">Agence</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="{{ url_for('logout') }}" class="nav-link" ><i class="fas fa-sign-out-alt pr-1"></i>Logout</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<div class="d-flex flex-column p-5">
    <h3 class="m-5">Affecter un locataire : </h3>
    <section class="d-flex justify-content-center">

            <div class="col-md-8">
                {% with messages = get_flashed_messages() %}
                {% if messages %}
                {% for message in messages %}
                <div class="alert alert-success alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                </div>
                {% endfor %}
                {% endif %}
                {% endwith %}
                <div class="card card-body">
                    <form action="{{url_for('affectation')}}" method="POST">
                        <div class="form-group">
                            <input type="text" class="form-control" name="nom_locataire" placeholder="Nom du locataire" required>
                        </div>
                        <div class="form-group">
                            <input type="text" class="form-control" name="prenom_locataire" placeholder="Prénom du locataire" required>
                        </div>
                        <div class="form-group">
                            <input type="text" class="form-control" name="nom_appartement" placeholder="Nom de l'appartement" required>
                        </div>
                        <div class="form-group">
                            <input type="text" class="form-control" name="adresse_appartement" placeholder="Adresse" required>
                        </div>
                        <div class="form-group">
                            <input type="text" class="form-control" name="complement_appartement" placeholder="Complément" >
                        </div>
                        <div class="form-group">
                            <input type="text" class="form-control" name="ville_appartement" placeholder="Ville" required>
                        </div>
                        <div class="form-group">
                            <input type="text" class="form-control" name="codepostal_appartement" placeholder="Code Postal" required>
                        </div>
                        <div class="form-group">
                            <input type="number" class="form-control" name="charges_appartement" placeholder="Charges" required>
                        </div>
                        <div class="form-group">
                            <input type="number" class="form-control" name="loyer_appartement" placeholder="Loyer" >
                        </div>
                        <div class="form-group">
                            <input type="number" class="form-control" name="depot_appartement" placeholder="Dépôt" required>
                        </div>
                        <div class="form-group">
                            <input type="date" class="form-control" name="datee_appartement" placeholder="Date d'entrée" required>
                        </div>
                        <div class="form-group">
                            <textarea name="edl_appartement" id="edl_appartement" cols="30" rows="10"
                                placeholder="État des lieux" class="form-control" required></textarea>
                        </div>
                        <button class="btn btn-primary btn-block">
                            Affecter
                        </button>
                    </form>
                </div>
            </div>
    </section>
    
    <h3 class="m-5">Liste des affecations: </h3>
    <section class="d-flex justify-content-center">
        <div>
            <table id="tableau_locataire" class="table table-striped table-bordered" style="width:100%">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nom du locataire</th>
                        <th>Prénom du locataire</th>
                        <th>Nom de l'appartement</th>
                        <th>Adresse</th>
                        <th>Complément</th>
                        <th>Ville</th>
                        <th>Code Postal</th>
                        <th>Charges</th>
                        <th>Loyer</th>
                        <th>Dépôt</th>
                        <th>Date d'entrée</th>
                        <th>Date de sortie</th>
                        <th>État des lieux</th>
                    </tr>
                </thead>
                <tbody>
                    {% for row in list_des_affectations %}
                    <tr>
                        <td>{{row[0]}}</td>
                        <td>{{row[2]}}</td>
                        <td>{{row[3]}}</td>
                        <td>{{row[5]}}</td>
                        <td>{{row[6]}}</td>
                        <td>{{row[7]}}</td>
                        <td>{{row[8]}}</td>
                        <td>{{row[9]}}</td>
                        <td>{{row[10]}}</td>
                        <td>{{row[11]}}</td>
                        <td>{{row[12]}}</td>
                        <td>{{row[13]}}</td>
                        <td>{{row[14]}}</td>
                        <td>{{row[15]}}</td>
    
                        <td width="130">
                            <a href="/edit_affectation/{{row[0]}}" class="btn btn-secondary btn-sm">edit</a>
                            <a href="/delete_affectation/{{row[0]}}" class="btn btn-danger btn-delete btn-sm">delete</a>
                          </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>    
    </section>
</div>


    



{% endblock %}

</body>

</html>