{% extends "layout.html" %}
{% block title1 %} <h3>Affecter un locataire:</h3>{% endblock %}
{% block content1 %}

            <div class="col-md-10">
                {% with messages = get_flashed_messages() %}
                {% if messages %}
                {% for message in messages %}
                <div class="alert alert-success alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                </div>
                {% endfor %}
                {% endif %}
                {% endwith %}
                <div class="card card-body">
                    <form action="{{url_for('affectation')}}" method="POST">
                        <div class="form-group">
                            <label>Selectionner Nom locataire</label>
                            <select name="nom_locataire"  id="search_locataire_id" class="form-control">
                                <option value="" selected="selected"></option>
                            {% for row in locataire %}
                                <option value='{{row.nom_locataire}}'>{{row.nom_locataire}}</option>
                            {% endfor %}
                            </select> 
                        </div>
                        <div id="show_locataire"></div>
                        <div class="form-group">
                            <label>Selectionner l'appartement</label>
                            <select name="nom_appartement"  id="search_appartement_id" class="form-control">
                              <option value="" selected="selected"></option>
                              {% for row in appartement %}
                              <option value='{{row.nom_appartement}}'>{{row.nom_appartement}}</option>
                              {% endfor %}
                            </select> 
                        </div>
                        <div id="show_appartement"></div>
                        <div class="form-group">
                            <label>Date d'entrée</label>
                            <input type="date" class="form-control" name="datee_appartement"required>
                        </div>
                        <div class="form-group">
                            <textarea name="edl_appartement" id="edl_appartement" cols="30" rows="10"
                                placeholder="État des lieux" class="form-control" required></textarea>
                        </div>
                        <button class="btn btn-primary btn-block">
                            Affecter
                        </button>
                    </form>
                </div>
            </div>

{% endblock %}
{% block title2 %} <h3>Liste des affectations:</h3>{% endblock %}   
{% block content2 %}
        <div>
            <table id="tableau" class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th>Nom du locataire</th>
                        <th>Prénom du locataire</th>
                        <th>Nom de l'appartement</th>
                        <th>Adresse</th>
                        <th>Complément</th>
                        <th>Ville</th>
                        <th>Code Postal</th>
                        <th>Charges</th>
                        <th>Loyer</th>
                        <th>Dépôt</th>
                        <th>Date d'entrée</th>
                        <th>Date de sortie</th>
                        <th>État des lieux</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for row in list_des_affectations %}
                    <tr>
                        <td>{{row[1]}}</td>
                        <td>{{row[2]}}</td>
                        <td>{{row[3]}}</td>
                        <td>{{row[4]}}</td>
                        <td>{{row[5]}}</td>
                        <td>{{row[6]}}</td>
                        <td>{{row[7]}}</td>
                        <td>{{row[8]}} €</td>
                        <td>{{row[9]}} €</td>
                        <td>{{row[10]}} €</td>
                        <td>{{row[11]}}</td>
                        <td>{{row[12]}}</td>
                        <td>{{row[13]}}</td>
    
                        <td>
                            <a href="/edit_affectation/{{row[0]}}" class="btn btn-secondary btn-sm">edit</a>
                            <a href="/delete_affectation/{{row[0]}}" class="btn btn-danger btn-delete btn-sm">delete</a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>    
{% endblock %}



    



